<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.check.mapper.AiBuilderPreviewMapper">
    <resultMap id="BaseResultMap" type="com.example.check.pojo.AiBuilderPreview">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="user_id" property="userId" jdbcType="INTEGER"/>
        <result column="title" property="title" jdbcType="VARCHAR"/>
        <result column="idea" property="idea" jdbcType="LONGVARCHAR"/>
        <result column="theme" property="theme" jdbcType="VARCHAR"/>
        <result column="tone" property="tone" jdbcType="VARCHAR"/>
        <result column="prompt" property="prompt" jdbcType="LONGVARCHAR"/>
        <result column="html" property="html" jdbcType="LONGVARCHAR"/>
        <result column="css" property="css" jdbcType="LONGVARCHAR"/>
        <result column="status" property="status" jdbcType="INTEGER"/>
        <result column="deployment_url" property="deploymentUrl" jdbcType="VARCHAR"/>
        <result column="platform" property="platform" jdbcType="VARCHAR"/>
        <result column="generation_time_ms" property="generationTimeMs" jdbcType="BIGINT"/>
        <result column="error_message" property="errorMessage" jdbcType="LONGVARCHAR"/>
        <result column="created_at" property="createdAt" jdbcType="TIMESTAMP"/>
        <result column="updated_at" property="updatedAt" jdbcType="TIMESTAMP"/>
    </resultMap>
    <sql id="BaseColumnList">
        id, user_id, title, idea, theme, tone, prompt, html, css, status, deployment_url, platform, generation_time_ms, error_message, created_at, updated_at
    </sql>
    <insert id="insert" parameterType="com.example.check.pojo.AiBuilderPreview" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO ai_builder_previews (user_id, title, idea, theme, tone, prompt, html, css, status, deployment_url, platform, generation_time_ms, error_message, created_at, updated_at)
        VALUES (#{userId}, #{title}, #{idea}, #{theme}, #{tone}, #{prompt}, #{html}, #{css}, #{status}, #{deploymentUrl}, #{platform}, #{generationTimeMs}, #{errorMessage}, #{createdAt}, #{updatedAt})
    </insert>
    <select id="selectById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        SELECT <include refid="BaseColumnList"/>
        FROM ai_builder_previews
        WHERE id = #{id}
    </select>
    <update id="update" parameterType="com.example.check.pojo.AiBuilderPreview">
        UPDATE ai_builder_previews
        SET user_id = #{userId},
            title = #{title},
            idea = #{idea},
            theme = #{theme},
            tone = #{tone},
            prompt = #{prompt},
            html = #{html},
            css = #{css},
            status = #{status},
            deployment_url = #{deploymentUrl},
            platform = #{platform},
            generation_time_ms = #{generationTimeMs},
            error_message = #{errorMessage},
            updated_at = #{updatedAt}
        WHERE id = #{id}
    </update>
</mapper>
